(this["webpackJsonpreact-super-useform-example"]=this["webpackJsonpreact-super-useform-example"]||[]).push([[0],{11:function(e,n,r){e.exports=r(21)},12:function(e,n,r){},21:function(e,n,r){"use strict";r.r(n);r(12);var t=r(0),i=r.n(t),a=r(6),o=r.n(a),l=r(10),u=r(1),c=r(2);function d(){return(d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}var f=function(e){return void 0===e&&(e={}),{required:void 0===e.required||e.required}},v=function(e){return void 0===e&&(e={}),d({type:String,validation:e.validation&&"function"===typeof e.validation?e.validation:function(e){return e.length>0},default:void 0!==e.default?e.default:""},f(e))},h=function(e){return e===String?"":e!==Boolean&&null},p=function e(n,r){if(n.type){if(n.type===Array)return e({a:n},{a:r}).a;var t=r&&"object"!==typeof r?r:n.default||h(n.type);return{type:n.type,value:t,error:!1,required:!0===n.required,validation:n.validation||function(){return!0}}}var i={};return Object.keys(n).forEach((function(t){if(n[t].type)if(n[t].type===Array){var a=r&&r[t]&&n[t].children.type&&n[t].children.type!==Array?r[t].map((function(e){return{value:e,type:n[t].children.type,error:!1,required:!0===n[t].children.required,validation:n[t].children.validation||function(){return!0}}})):r&&r[t]&&Array.isArray(r[t])?r[t].map((function(r){return e(n[t].children,r)})):(n[t].default||[]).map((function(r){return e(n[t].children,r)}))||[];if(n[t].min&&a.length<n[t].min)for(var o=n[t].min-a.length,l=0;l<o;l++)a.push(e(n[t].children,{}));i[t]={type:Array,children:a,childrenSchema:n[t].children,schema:n[t],readOnly:n[t].readOnly,validation:n[t].validation||function(){return!0},max:n[t].max||1/0,min:n[t].min||0}}else{var u=r&&void 0!==r[t]&&"object"!==typeof r[t]?r[t]:n[t].default||h(n[t].type);i[t]={type:n[t].type,value:u,error:!1,required:!0===n[t].required,validation:n[t].validation||function(){return!0}}}else i[t]=m(n[t],r&&r[t]&&r[t])})),r&&Object.keys(r).forEach((function(e){n[e]||(i[e]={type:"object"===typeof r[e]?Object:String,value:r[e],error:!1,required:!1,validation:function(){return!0}})})),i},m=function(e,n){return p(e,n)},s=function(e,n){void 0===e&&(e={}),void 0===n&&(n=null);var r=Object(t.useState)(m(e,n)),i=r[0],a=r[1],o=Object(t.useState)(!1),l=o[0],u=o[1],c=Object(t.useState)([]),f=c[0],v=c[1],h=function e(n){if(n.type===Array){var r=n.children.length<n.min||!s(n);return d(d({},n),{},{children:n.children.map(e),error:r})}if(n.type)return n.validation?(n.required||n.value)&&n.validation&&"function"===typeof n.validation&&!n.validation(n.value)?d(d({},n),{},{error:!0}):d(d({},n),{},{error:null}):n;var t={};return Object.keys(n).forEach((function(r){t[r]=e(n[r])})),t.__error=!s(n),t},s=function e(n){if(n.type===Array){if(n.min&&n.children.length<n.min)return!1;var r=!0;return n.children.forEach((function(n){e(n)||(r=!1)})),r}if(n.type)return!n.validation||(!n.required&&!n.value||("function"!==typeof n.validation||n.validation(n.value)));var t=!0;return Object.keys(n).forEach((function(r){e(n[r])||(t=!1)})),t},y=function e(n){if(n.type===Array)return n.children.map(e);if(n.type)return n.value;var r={};return Object.keys(n).forEach((function(t){"__error"!==t&&(r[t]=e(n[t]),n[t].___payload&&(r.payload=n[t].___payload))})),r},g=s(i),b=function(e,n){f.filter((function(n){return n.event===e})).forEach((function(e){e.callback(n)}))};return{isValid:g,checkErrors:function(){a(h(i))},get:function(e){var n=e.split(".");return function e(n,r,t,i){if(void 0===i&&(i=r),0===r.length)return n.type===Array?{error:n.error,length:n.children.length,map:function(r){return n.children.map((function(a,o){return r(d(d({},e(a,[],(function(e){t(d(d({},n),{},{children:n.children.map((function(n,r){return r===o?d(d({},n),e):n}))}))}),i)),{},{canBeRemoved:function(){return!(n.min&&n.children.length<=n.min)},remove:function(){return!n.readOnly&&(n.min&&n.children.length<=n.min?(console.warn("Impossible to delete"),!1):void t(d(d({},n),{},{children:n.children.filter((function(e,n){return o!==n}))})))}}),o)}))},toJSON:function(){return y(n)},set:function(e){var r=p(n.schema,e);t(r)},get:function(r){return e(n.children[r],[],(function(e){t(d(d({},n),{},{children:n.children.map((function(n,t){return t===r?d(d({},n),e):n}))}))}),i)},canPush:function(){return!n.readOnly&&!(n.max&&n.children.length>=n.max)},push:function(e){if(void 0===e&&(e=null),n.readOnly)console.warn("form field '"+i.join(".")+"' is readOnly");else if(!(n.children.length>=n.max)){var r=p(n.childrenSchema,e);t(d(d({},n),{},{children:[].concat(n.children,[r])}))}},canRemove:function(){return!n.readOnly&&!(n.min&&n.children.length<=n.min)},remove:function(e){n.min&&n.children.length<=n.min?console.warn("Impossible to delete"):t(d(d({},n),{},{children:n.children.filter((function(n,r){return e!==r}))}))}}:n.type?{value:n.value,setValue:function(e){t({value:e,error:null})},error:n.error}:{get:function(r){return e(n,r.split("."),(function(e){t(d({},e))}),i)},toJSON:function(){return y(n)}};if(!n)return console.error("unknown field '"+i.join(".")+"'"),null;if(n.type===Object){for(var a=n.value,o=r[0],l=[].concat(r);l.length>0;){if("object"!==typeof a)return console.warn(r.join(".")+" not found"),null;a=a[l[0]],l=l.slice(1)}return{value:a,setValue:function(e){var r;t(d(d({},n),{},{value:d(d({},n.value),{},(r={},r[o]=e,r)),error:null}))}}}if(n.type===Array){var u=r[0],c=r[1];return n.children[u]?e(n.children[u][c],r.slice(2),(function(e){t(d(d({},n),{},{children:n.children.map((function(n,r){var t;return r===parseInt(u,10)?d(d({},n),{},((t={})[c]=d(d({},n[c]),e),t)):n}))}))}),i):void console.error("cannot find index "+u+" on "+i.join("."))}return e(n[r[0]],r.slice(1),(function(e){var i;t(d(d({},n),{},((i={})[r[0]]=d(d({},n[r[0]]),e),i)))}),i)}(i,n,(function(e){b("change",y(e)),u(!0),a(d(d({},i),e))}))},toJSON:function(){return y(i)},handleSubmit:function(e){s(i)||e.preventDefault()},formData:i,modified:l,setModified:u,addEventListener:function(e,n){f.find((function(r){return r.event===e&&r.callback===n}))||v([].concat(f,[{event:e,callback:n}]))},removeEventListener:function(e,n){v(f.filter((function(r){return r.event!==e||r.callback!==n})))}}};function y(){var e=Object(u.a)(["\n\nmargin: 10px 0;\n"]);return y=function(){return e},e}function g(){var e=Object(u.a)(["\nmargin-bottom:5px;\n"]);return g=function(){return e},e}function b(){var e=Object(u.a)(["\nwidth: 1000px;\nmax-width:90vw;\nmargin:auto;\n"]);return b=function(){return e},e}function E(){var e=Object(u.a)(["\npadding:10px;\nborder-radius: 6px;\nbackground-color:#3498db;\nborder:0;\nmargin: 20px 0;\nbox-shadow: 0 0 20px rgba(0,0,0,0.02);\ncursor:pointer;\ncolor:white;\noutline: none;\nmargin:8px 4px;\n\ntransition: background-color 150ms;\n&:active{\n\tbackground-color:#2586c7;\n}\n"]);return E=function(){return e},e}function x(){var e=Object(u.a)(["\npadding:10px;\nborder-radius: 6px;\nbackground-color:white;\nborder:1px solid #eee;\nbox-shadow: 0 0 20px rgba(0,0,0,0.02);\noutline: none;\n"]);return x=function(){return e},e}function O(){var e=Object(u.a)(["\npadding:20px;\nborder-radius: 6px;\nbackground-color:white;\nborder:0;\nresize:none;\nwidth:100%;\ndisplay:block;\nmargin: 20px 0;\nheight:200px;\noutline:none;\nbox-shadow: 0 0 20px rgba(0,0,0,0.02)\n"]);return O=function(){return e},e}c.a.textarea(O());var j=c.a.input(x()),k=c.a.button(E()),w=c.a.div(b()),A=function(e){var n=e.value,r=e.setValue,t=e.error,a=Object(l.a)(e,["value","setValue","error"]);return i.a.createElement(j,Object.assign({style:t?{borderColor:"red"}:{},value:n,onChange:function(e){r(e.target.value)}},a))},S=(c.a.div(g()),c.a.div(y()),{}),q={movies:{type:Array,min:1,children:{name:v(),date:v(),tags:{type:Array,min:2,children:v()}}}},_=function(){var e=s(q,S);return Object(t.useEffect)((function(){e.addEventListener("change",(function(e){console.log("CHANGE",e)}))}),[]),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100vh"}},i.a.createElement("div",{style:{flex:1,overflowY:"auto"}},i.a.createElement(w,null,i.a.createElement("h1",null,"My best movies"),e.get("movies").map((function(e){return i.a.createElement("div",{style:{margin:"0 0 40px 0",background:"white",padding:20}},i.a.createElement("div",null,"Movie name",i.a.createElement("br",null),i.a.createElement(A,e.get("name"))),i.a.createElement("div",null,"Movie date",i.a.createElement("br",null),i.a.createElement(A,e.get("date"))),i.a.createElement("hr",null),i.a.createElement("div",null,i.a.createElement("h2",null,"Tags"),e.get("tags").map((function(e){return i.a.createElement(A,e)})),i.a.createElement("br",null),i.a.createElement("button",{onClick:function(){return e.get("tags").push()}},"Add a tag")))})),i.a.createElement("hr",null),i.a.createElement("button",{onClick:function(){e.get("movies").push()}},"Add a movie"))),i.a.createElement("footer",{style:{backgroundColor:"white",boxShadow:"0 0 20px rgba(0,0,0,0.1)"}},i.a.createElement(w,null,i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement("div",{style:{flex:1}},e.modified?"\u270f\ufe0f":"",e.isValid?"\u2714\ufe0f":"\u274c"),i.a.createElement("div",null,i.a.createElement(k,{onClick:function(){e.checkErrors()}},"Check Errors"),i.a.createElement(k,{onClick:function(){console.log(e.toJSON())}},"Export JSON"))))))};o.a.render(i.a.createElement(_,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.84aa52f4.chunk.js.map